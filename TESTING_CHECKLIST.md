# GrowRep - 3秒ルールモード機能テストチェックリスト

## Step 1: ヘッダーUIとモードセレクター
- [✅] ヘッダーが2行構成で表示される
- [✅] モードセレクターが表示される
- [✅] プロトタイプと3秒ルールの選択肢が表示される
- [✅] モバイルビューで適切にスタックされる

## Step 2: モード状態管理
- [✅] モードセレクター変更時にモードが切り替わる
- [✅] タブの表示/非表示が適切に切り替わる
- [✅] 3秒タイマータブが3秒ルールモードでのみ表示される
- [✅] ログイン時にデフォルトでプロトタイプモードになる

## Step 3 & 4: Firestoreコレクション分離
### プロトタイプモード
- [✅] 投稿が`posts`コレクションに保存される
- [✅] 倍率設定が`settings`コレクションに保存される
- [✅] キャッシュが正しく動作する

### 3秒ルールモード
- [✅] 投稿が`posts_3sec`コレクションに保存される
- [✅] 倍率設定が`settings_3sec`コレクションに保存される
- [✅] キャッシュが正しく動作する

### データ分離の確認
- [✅] プロトタイプモードで投稿したデータが3秒ルールモードで表示されない
- [✅] 3秒ルールモードで投稿したデータがプロトタイプモードで表示されない
- [✅] 倍率設定が各モードで独立している
- [ ] モード切り替え時にキャッシュがクリアされる

## Step 5: タブ表示のモード適応
- [✅] 各タブにモード情報が表示される
- [✅] プロトタイプモードで紫系グラデーションが表示される
- [✅] 3秒ルールモードでピンク系グラデーションが表示される
- [✅] モード切り替え時に情報が即座に更新される
- [✅] 各タブで適切な説明文が表示される

## Step 6: 3秒タイマー機能
### 基本動作
- [ ] スタートボタンで3秒間隔のビープ音が開始される
- [ ] カウントが正しく増加する（1, 2, 3...）
- [ ] 経過時間が正しく表示される（0:03, 0:06, 0:09...）
- [ ] ストップボタンでタイマーが停止する
- [ ] リセットボタンでカウントと時間が0に戻る

### ボタン状態
- [ ] スタート時にスタートボタンが無効化される
- [ ] スタート時にストップボタンが有効化される
- [ ] ストップ時にスタートボタンが有効化される
- [ ] ストップ時にストップボタンが無効化される
- [ ] リセット時に両ボタンが適切な状態になる

### 視覚的フィードバック
- [ ] ビープ時にカウント表示がアニメーションする
- [ ] ビープ時に時間表示がアニメーションする
- [ ] アニメーションがスムーズに動作する

### エラーハンドリング
- [ ] Web Audio API非対応ブラウザでもエラーが表示されない
- [ ] AudioContext再開失敗時もアプリが動作し続ける
- [ ] コンソールに適切なログが出力される

## Step 7: 総合テスト
### モード切り替え
- [ ] 投稿タブでモード切り替え時にタイマーが停止する
- [ ] 掲示板タブでモード切り替え時にデータが更新される
- [ ] ランキングタブでモード切り替え時にデータが更新される
- [ ] 成長グラフタブでモード切り替え時にデータが更新される
- [ ] 総合得点タブでモード切り替え時にデータが更新される

### ログアウト処理
- [ ] ログアウト時にタイマーが停止する
- [ ] ログアウト時にグラフがクリアされる
- [ ] ログイン画面に正しく戻る

### データ操作
- [✅] プロトタイプモードでの投稿が正しく保存される
- [✅] 3秒ルールモードでの投稿が正しく保存される
- [✅] いいね機能が各モードで独立して動作する
- [✅] コメント機能が各モードで独立して動作する
- [✅] 投稿削除が各モードで正しく動作する

### コンソールログ
- [ ] モード切り替え時に適切なログが出力される
- [ ] データ読み込み時にコレクション名が出力される
- [ ] キャッシュ使用/Firestore取得が明示される
- [ ] エラー時に詳細な情報が出力される

### レスポンシブデザイン
- [ ] モバイルビューでヘッダーが縦に並ぶ
- [ ] モバイルビューでタイマー表示が縦に並ぶ
- [ ] モバイルビューでタイマーボタンが縦に並ぶ
- [ ] モード情報のフォントサイズが適切に調整される

## パフォーマンス
- [ ] キャッシュが5分間有効である
- [ ] 不要なFirestore読み取りが発生していない
- [ ] モード切り替えがスムーズである
- [ ] タイマーの精度が維持されている

## ブラウザ互換性
- [ ] Chrome/Edge: 全機能が動作する
- [ ] Firefox: 全機能が動作する
- [ ] Safari: 全機能が動作する（iOS Safari含む）
- [ ] モバイルブラウザ: タッチ操作が正常に動作する

## セキュリティ
- [ ] 各ユーザーが自分の投稿のみ削除できる
- [ ] 各ユーザーが自分のコメントのみ削除できる
- [ ] 不正なデータ入力が適切にバリデーションされる
- [ ] XSS対策（escapeHtml）が適用されている
